<template>
    <div class={rootClass}>
        <!-- Collapsed header / toggle row -->
        <div class="gs-header" onclick={handleToggle} role="button" tabindex="0" onkeydown={handleKeydown}>
            <div class="gs-header-left">
                <lightning-icon icon-name="utility:knowledge_base" size="x-small" class="gs-icon"></lightning-icon>
                <span class="gs-title">Getting Started with Delivery Hub</span>
            </div>
            <lightning-icon icon-name={chevronIcon} size="x-small" class="gs-chevron"></lightning-icon>
        </div>

        <!-- Expanded body -->
        <template if:true={isExpanded}>
            <div class="gs-body">
                <p class="gs-intro">
                    Here&apos;s a quick overview of how your delivery workflow moves through this portal.
                </p>

                <div class="gs-steps">
                    <!-- Step 1 -->
                    <div class="gs-step">
                        <div class="gs-step-num gs-step-num--approval">1</div>
                        <div class="gs-step-content">
                            <strong class="gs-step-title">Review &amp; Approve</strong>
                            <p class="gs-step-desc">
                                When a ticket is scoped and estimated, it lands in <em>Client Approval</em>.
                                You&apos;ll see it highlighted in <strong>Needs Your Attention</strong> above.
                                Open the ticket, review the details, and click <strong>Approve</strong> or send it back with a comment.
                            </p>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="gs-step">
                        <div class="gs-step-num gs-step-num--uat">2</div>
                        <div class="gs-step-content">
                            <strong class="gs-step-title">UAT Testing</strong>
                            <p class="gs-step-desc">
                                Once development and internal QA are complete, tickets move to <em>Client UAT</em>.
                                Your team tests the feature in a sandbox or production org.
                                Use the <strong>Chat</strong> panel on the ticket to report any issues directly to the engineering team.
                            </p>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="gs-step">
                        <div class="gs-step-num gs-step-num--signoff">3</div>
                        <div class="gs-step-content">
                            <strong class="gs-step-title">Sign Off</strong>
                            <p class="gs-step-desc">
                                Happy with the result? Move the ticket to <em>UAT Sign-off</em> to confirm acceptance.
                                This triggers the deployment pipeline — your approved change gets scheduled for production release.
                            </p>
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div class="gs-step">
                        <div class="gs-step-num gs-step-num--comms">4</div>
                        <div class="gs-step-content">
                            <strong class="gs-step-title">Stay In the Loop</strong>
                            <p class="gs-step-desc">
                                Watch the <strong>What&apos;s In Flight</strong> tiles to see how many tickets are active in each phase.
                                The <strong>Recently Updated</strong> list shows the last 5 changed tickets so you always know where things stand.
                                Use <strong>Report Issue / Request Feature</strong> at any time to submit new work directly to the queue.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="gs-footer">
                    <lightning-button
                        label="Check Connection"
                        icon-name="utility:connected_apps"
                        variant="neutral"
                        size="small"
                        onclick={handleCheckConnection}
                        disabled={isCheckingConnection}>
                    </lightning-button>
                    <template if:true={isCheckingConnection}>
                        <lightning-spinner size="x-small" alternative-text="Checking…" class="gs-spinner"></lightning-spinner>
                    </template>
                </div>
            </div>
        </template>
    </div>
</template>
