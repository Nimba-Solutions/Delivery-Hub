<template>
    <div class="slds-card">
        <div class="slds-card__header slds-grid">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <lightning-icon icon-name="utility:einstein" alternative-text="AI Features" size="small"></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                        <span>AI Features</span>
                    </h2>
                    <p class="slds-card__header-subtitle">Configure AI-powered enhancements for your Kanban board</p>
                </div>
            </header>
        </div>
        
        <div class="slds-card__body slds-card__body_inner">
            <!-- OpenAI Warning -->
            <template if:true={showOpenAIWarning}>
                <div class="slds-notify slds-notify_alert slds-alert_warning slds-m-bottom_large" role="alert">
                    <span class="slds-assistive-text">Warning</span>
                    <div class="slds-media slds-media_center">
                        <div class="slds-media__figure">
                            <lightning-icon icon-name="utility:warning" alternative-text="Warning" size="x-small" variant="inverse"></lightning-icon>
                        </div>
                        <div class="slds-media__body">
                            <p>Some AI features require an OpenAI API key. Configure it in the OpenAI tab to unlock all features.</p>
                        </div>
                    </div>
                </div>
            </template>

            <!-- Master Toggle -->
            <div class="slds-form-element slds-m-bottom_large">
                <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center">
                    <div class="slds-col">
                        <div class="slds-media slds-media_center slds-m-bottom_x-small">
                            <div class="slds-media__figure">
                                <lightning-icon icon-name="utility:zap" alternative-text="AI Suggestions" size="x-small"></lightning-icon>
                            </div>
                            <div class="slds-media__body">
                                <label class="slds-form-element__label slds-text-body_regular">Enable AI Suggestions</label>
                            </div>
                        </div>
                        <div class="slds-form-element__help">
                            Turn on AI-powered features across the application
                        </div>
                    </div>
                    <div class="slds-col slds-no-flex">
                        <lightning-input
                            type="toggle"
                            checked={aiSuggestionsEnabled}
                            onchange={handleAISuggestionsChange}>
                        </lightning-input>
                    </div>
                </div>
            </div>

            <div class="slds-border_top slds-m-vertical_medium"></div>

            <!-- Individual AI Features -->
            <div class="slds-m-bottom_large">
                <!-- Auto-Generate Descriptions -->
                <div class="slds-form-element slds-m-bottom_medium">
                    <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center">
                        <div class="slds-col">
                            <label class="slds-form-element__label slds-text-body_small">Auto-Generate Descriptions</label>
                            <div class="slds-form-element__help">
                                Automatically enhance ticket descriptions using AI
                            </div>
                        </div>
                        <div class="slds-col slds-no-flex">
                            <lightning-input
                                type="toggle"
                                checked={autoDescriptionsChecked}
                                disabled={isAutoDescriptionsDisabled}
                                onchange={handleAutoDescriptionsChange}>
                            </lightning-input>
                        </div>
                    </div>
                </div>

                <!-- AI Time Estimation -->
                <div class="slds-form-element">
                    <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center">
                        <div class="slds-col">
                            <div class="slds-media slds-media_center slds-m-bottom_x-small">
                                <div class="slds-media__figure">
                                    <lightning-icon icon-name="utility:clock" alternative-text="Time Estimation" size="xx-small"></lightning-icon>
                                </div>
                                <div class="slds-media__body">
                                    <label class="slds-form-element__label slds-text-body_small">AI Time Estimation</label>
                                </div>
                            </div>
                            <div class="slds-form-element__help">
                                Get AI-powered development time estimates for tickets
                            </div>
                        </div>
                        <div class="slds-col slds-no-flex">
                            <lightning-input
                                type="toggle"
                                checked={aiEstimationChecked}
                                disabled={isAiEstimationDisabled}
                                onchange={handleAIEstimationChange}>
                            </lightning-input>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slds-border_top slds-m-vertical_medium"></div>

            <!-- Info Section -->
            <div class="info-section slds-p-around_medium">
                <div class="slds-media slds-media_top">
                    <div class="slds-media__figure">
                        <lightning-icon icon-name="utility:info" alternative-text="Information" size="x-small"></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                        <h4 class="slds-text-heading_small slds-m-bottom_x-small">How AI Features Work</h4>
                        <p class="slds-text-body_small slds-text-color_weak slds-m-bottom_small">
                            AI suggestions use OpenAI's GPT models to analyze your ticket content and provide:
                        </p>
                        <ul class="slds-text-body_small slds-text-color_weak">
                            <li class="slds-m-bottom_xx-small">• Enhanced titles and descriptions</li>
                            <li class="slds-m-bottom_xx-small">• Realistic time estimates</li>
                            <li>• Context-aware suggestions</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>